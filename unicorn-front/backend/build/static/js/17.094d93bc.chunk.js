(this.webpackJsonpkuasv1=this.webpackJsonpkuasv1||[]).push([[17],{177:function(e,n,t){"use strict";var a=t(19),r=t(0),i=(t(178),t(478)),o=t(439),c=t(451),s=t(479),l=t(471),u=t(447),d=t(473),f=t(176),h=t.n(f),m=(t(11),t(12)),p=t(2),b=t(14),j=t(183),g=t(101),O=(t(9),t(102)),x=t(72),y=t(1);n.a=function(){var e=Object(m.b)(),n=Object(a.a)(e,2),t=(n[0],n[1],Object(p.f)()),f=Object(r.useState)(null),v=Object(a.a)(f,2),w=v[0],k=v[1],S=Object(r.useState)(!1),C=Object(a.a)(S,2),T=C[0],E=C[1],W=Object(r.useState)(""),q=Object(a.a)(W,2),P=q[0],B=q[1],N=Object(r.useState)(""),_=Object(a.a)(N,2),U=_[0],V=_[1],F=Object(r.useState)(!1),J=Object(a.a)(F,2),A=J[0],R=J[1],Y=function(){R(!0);var e=w;console.log(e),window.recaptchaVerifier=new O.a.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:function(e){}});var n=window.recaptchaVerifier;O.a.auth().signInWithPhoneNumber(e,n).then((function(e){R(!1),console.log("sms  sent"),window.confirmationResult=e;var n=window.prompt("Enter verification code");e.confirm(n).then((function(e){e.user;E(!0),console.log("user verified the code correctly!")})).catch((function(e){alert("The code you entered was incorrect. Try again!")}))})).catch((function(e){R(!1),alert("There was some error processing your request!")}))},z=function(e,n){""!=e.email&&(R(!0),g.a.createUserWithEmailAndPassword(e.email,e.password).then((function(n){console.log(n.user._delegate.uid),B(e.firstname),V(e.lastname),R(!1)}),(function(e){R(!1),"auth/admin-restricted-operation"!=e.code&&alert(e.code+". sorry there was some error procesing your request. check your email and password!"),console.log(e.code)})))};return Object(r.useEffect)((function(){return g.a.onAuthStateChanged((function(e){if(e){if(null==e.email)return;if(""==P||""==U)return;return R(!0),void fetch("http://localhost:8080/users/addProfile",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({phone_number:w||"",email:e.email,uid:e.uid,first_name:P,last_name:U})}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){R(!1),""!=P&&t.push("/signin")})).catch((function(n){R(!1),e.delete().then((function(){console.log("userdeleted")})).catch((function(e){})),alert("Sorry,  Your information is not fully updated! some server error happened. Try again "),"function"===typeof n.json&&n.json().then((function(e){})).catch((function(e){}))}))}}))}),[U]),Object(y.jsxs)("div",{className:"signUp",children:[Object(y.jsxs)(l.a,{elevation:8,style:{padding:"20px",margin:"10px auto "},className:"signUp__paper",children:[Object(y.jsxs)(u.a,{align:"center",children:[Object(y.jsxs)(i.a,{style:{backgroundColor:"green"},children:[" ",Object(y.jsx)(h.a,{})," "]}),Object(y.jsx)("h2",{children:" Sign Up "})]}),Object(y.jsx)(j.c,{initialValues:{email:"",password:"",firstname:"",lastname:""},onSubmit:z,children:function(e){return Object(y.jsx)(j.b,{children:T?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{as:o.a,label:"Firstname",name:"firstname",placeholder:"Enter first name",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(y.jsx)(j.a,{as:o.a,label:"Lastname",name:"lastname",placeholder:"Enter last name",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(y.jsx)(j.a,{as:o.a,label:"Email",name:"email",placeholder:"Enter your email",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(y.jsx)(j.a,{as:o.a,label:"Password",name:"password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(y.jsx)(c.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",style:{marginTop:"10px",marginBottom:"10px"},onClick:z,children:"Sign up"})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{as:o.a,label:"Phone Number",name:"Phone Number",placeholder:"Example +251918224567",type:"phonenumber",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"},onChange:function(e){k(e.target.value)}}),Object(y.jsx)("p",{children:" Your phone number is required for verification purposes. We will be sending you verification code "}),Object(y.jsx)(c.a,{id:"sign-in-button",onClick:Y,children:" Continue "})]})})}}),Object(y.jsxs)(d.a,{children:["Do you have an account?",Object(y.jsxs)(b.b,{to:"/signin",children:["  ",Object(y.jsx)(s.a,{href:"#",children:" Sign in "}),"  "]})]})]}),A?Object(y.jsx)(x.a,{}):""]})}},178:function(e,n,t){},416:function(e,n,t){"use strict";t.r(n);t(0);var a=t(177),r=t(68),i=t(69),o=t(1);n.default=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(i.a,{}),Object(o.jsx)(a.a,{}),Object(o.jsx)(r.a,{})]})}}}]);
//# sourceMappingURL=17.094d93bc.chunk.js.map