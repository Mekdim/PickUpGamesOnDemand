(this.webpackJsonpkuasv1=this.webpackJsonpkuasv1||[]).push([[22],{297:function(e,t,n){},452:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(21),i=n(19),s=n(13),c=n.n(s),o=(n(297),n(478)),l=n(439),u=n(451),d=n(479),j=n(471),p=n(447),h=n(473),b=n(176),m=n.n(b),f=n(11),x=n(12),g=n(2),O=n(14),v=n(183),y=n(101),k=n(9),w=n.n(k),S=n(72),T=n(22),E=n(1);var C=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],b=Object(a.useState)(!1),k=Object(i.a)(b,2),C=k[0],_=k[1],I=Object(a.useState)(null),W=Object(i.a)(I,2),B=W[0],F=W[1],N=Object(x.b)(),P=Object(i.a)(N,2),A=(P[0],P[1]),R=Object(g.f)();return Object(a.useEffect)((function(){var e=y.a.onAuthStateChanged(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=42;break}return s(!0),e.prev=2,e.next=5,Object(T.d)(t.uid);case 5:if(!(n=e.sent)||!n.accessToken){e.next=11;break}w.a.set("accessToken",n.accessToken),w.a.set("refreshToken",n.refreshToken),e.next=13;break;case 11:return alert("Sorry, Some server error happended while logging in. We couldnt grab tokens for you!"),e.abrupt("return");case 13:return e.next=15,Object(T.e)(t.uid);case 15:if(!((a=e.sent).length>0)){e.next=34;break}return r={email:t.email,uid:t.uid,phonenumber:a[0].phone_number,firstname:a[0].first_name,lastname:a[0].last_name,id:a[0].id},w.a.set("firstname",a[0].first_name),w.a.set("email",t.email),w.a.set("uid",t.uid),w.a.set("id",a[0].id),A({type:f.a.SET_USER,user:r}),e.prev=23,e.next=26,Object(T.c)(r.id);case 26:i=e.sent,A({type:f.a.SET_USER_NOTIFICATIONS,userNotifications:i}),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(23),console.error("Unable to fetch notifications");case 33:R.push("/");case 34:e.next=42;break;case 36:e.prev=36,e.t1=e.catch(2),s(!1),y.a.signOut(),alert("Sorry, Some server error happended while logging in. Try again!"),"function"===typeof e.t1.json&&e.t1.json().then((function(e){})).catch((function(e){}));case 42:case"end":return e.stop()}}),e,null,[[2,36],[23,30]])})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]),Object(E.jsxs)("div",{className:"signIn",children:[Object(E.jsxs)(j.a,{elevation:10,style:{padding:"20px",height:"70vh",margin:"10px auto "},className:"signIn__paper",children:[Object(E.jsxs)(p.a,{align:"center",children:[Object(E.jsx)(o.a,{style:{backgroundColor:"green"},children:Object(E.jsx)(m.a,{})}),C?Object(E.jsx)("h2",{children:" Reset your Password "}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("h2",{children:" Sign In "})})]}),C?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(l.a,{label:"Email",name:"email",placeholder:"Enter email",fullWidth:!0,required:!0,variant:"outlined",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"},onChange:function(e){F(e.target.value)}}),Object(E.jsx)(u.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",style:{marginTop:"10px",marginBottom:"10px"},onClick:function(e){e.preventDefault(),_(!1)},children:"Go Back"}),Object(E.jsx)(u.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",style:{marginTop:"10px",marginBottom:"10px"},onClick:function(){B?(s(!0),y.a.sendPasswordResetEmail(B).then((function(){s(!1),alert("An email is sent with alink to reset your password!"),console.log("password sent to email")})).catch((function(e){s(!1),alert("sorry, there was an error sending reset email to the email provided!")}))):alert("Make sure you enter your email address")},children:"Submit"})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(v.c,{initialValues:{email:"",password:""},onSubmit:function(e){s(!0),y.a.signInWithEmailAndPassword(e.email,e.password).then((function(e){e.user;s(!1)})).catch((function(e){s(!1),alert("Sorry, something went wrong! The email or the password you provided is wrong!")}))},children:function(e){return Object(E.jsxs)(v.b,{children:[Object(E.jsx)(v.a,{as:l.a,label:"Email",name:"email",placeholder:"Enter email",fullWidth:!0,required:!0,variant:"outlined",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(E.jsx)(v.a,{as:l.a,label:"Password",name:"password",placeholder:"Enter password",type:"password",fullWidth:!0,required:!0,variant:"standard",style:{backgroundColor:"#f7f7f7",marginTop:"10px",marginBottom:"10px"}}),Object(E.jsx)(u.a,{type:"submit",color:"primary",fullWidth:!0,variant:"contained",style:{marginTop:"10px",marginBottom:"10px"},children:"Sign In"})]})}}),Object(E.jsx)(h.a,{children:Object(E.jsx)(d.a,{href:"#",onClick:function(e){e.preventDefault(),_(!0)},children:"Forgot Password?"})}),Object(E.jsxs)(h.a,{children:["Don't have an account?",Object(E.jsxs)(O.b,{to:"/signup",children:[Object(E.jsx)(d.a,{href:"#",children:" Sign Up "})," "]})]})]})]}),n?Object(E.jsx)(S.a,{}):""]})},_=n(68),I=n(69);t.default=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(I.a,{}),Object(E.jsx)(C,{}),Object(E.jsx)(_.a,{})]})}}}]);
//# sourceMappingURL=22.993f7e81.chunk.js.map